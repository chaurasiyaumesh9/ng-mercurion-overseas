<div class="container mx-auto px-4 py-8">

    <!-- Heading -->
    <div class="mb-6">
        <h1 class="text-2xl font-bold text-gray-800">
            @switch (true) {
            @case (!!search()) {
            Search results for "{{ search() }}"
            }
            @case (!!subCategoryName()) {
            {{ subCategoryName() }}
            }
            @case (!!categoryName()) {
            {{ categoryName() }}
            }
            @default {
            All Products
            }
            }
        </h1>

        <!-- Breadcrumb -->
        @if (categoryName()) {
        <nav class="text-sm text-gray-600 mt-2">
            <a href="/" class="hover:text-blue-600">Home</a>
            <span class="mx-2">/</span>
            <a [href]="'/' + store.categorySlug()" class="hover:text-blue-600">
                {{ categoryName() }}
            </a>
            @if (subCategoryName()) {
            <span class="mx-2">/</span>
            <span class="font-semibold">{{ subCategoryName() }}</span>
            }
        </nav>
        }
    </div>

    <!-- Loading -->
    @if (loading()) {
    <div class="text-center py-20 text-gray-500">
        Loading products...
    </div>
    }

    <!-- Empty -->
    @if (!loading() && products().length === 0) {
    <div class="text-center py-20 text-gray-500">
        No products found.
    </div>
    }

    <!-- Grid -->
    @defer (on viewport) {
    @if (!loading() && products().length > 0) {
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
        @for (product of products(); track product.id) {
        <app-product-tile [product]="product"></app-product-tile>
        }
    </div>
    }
    } @placeholder {
    <div class="text-center py-20 text-gray-400">
        Preparing product grid...
    </div>
    }

</div>